#!/bin/bash

if [ "$(type -t dir)" != "function" ]
then
    . "$(cd "$(dirname "${BASH_SOURCE[0]}")"; pwd)"/dir
fi

if [ "$(type -t os)" != "function" ]
then
    . "$(cd "$(dirname "${BASH_SOURCE[0]}")"; pwd)"/os
fi

if [ "$(type -t version)" != "function" ]
then
    . "$(cd "$(dirname "${BASH_SOURCE[0]}")"; pwd)"/version
fi

arduino_dir() {
    OS="$(os "$@")"
    DIR="$(dir "$@")"
    VERSION="$(version "$@")"

    if [ "$OS" = "macosx" ]
    then
        ARDUINO_DIR="${DIR}/cache/${VERSION}-${OS}/Arduino.app/Contents/Java"
    else
        ARDUINO_DIR="${DIR}/cache/${VERSION}-${OS}/arduino-${VERSION}"
    fi
}

if [[ "${BASH_SOURCE[0]}" == "${0}" ]]
then
    arduino_dir "$@"
fi
