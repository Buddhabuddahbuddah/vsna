#!/usr/bin/perl

our @ports = ();

if ($^O eq "linux") {
 @ports = </dev/ttyACM*>;
} elsif ($^O eq "darwin") {
 @ports = </dev/cu.usb*>;
} else {
 for (my $com = 5; $com < 20; ++$com) {
   $file = "\\\\.\\COM$com";
   if (-r $file) {
     push(@ports,"\\\\.\\COM$com");
   }
 }
}
if ($#ports >= 0) {
  print "$ports[0]\n";
  exit 0;
} else {
  exit 1;
}
